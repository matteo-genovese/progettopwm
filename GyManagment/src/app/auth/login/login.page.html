<ion-content [fullscreen]="true" class="ion-padding">
  <div class="container-login">

    <!-- Sezione logo -->
    <div class="sezione-logo">
      <ion-icon name="barbell" size="large"></ion-icon>
      <h1>GyManagement</h1>
      <p>Accedi al tuo account</p>
    </div>

    <form (ngSubmit)="onLogin()" #loginForm="ngForm">
      <!-- Username -->
      <ion-item>
        <ion-label position="stacked">Username</ion-label>
        <ion-input type="text" [(ngModel)]="credentials.username" name="username" required [disabled]="isLoading">
        </ion-input>
      </ion-item>

      <!-- Password -->
      <ion-item>
        <ion-label position="stacked">Password</ion-label>
        <ion-input type="password" [(ngModel)]="credentials.password" name="password" required [disabled]="isLoading">
        </ion-input>
      </ion-item>

      <!-- Messaggio di errore -->
      @if (errorMessage) {
        <div class="errore">
          <ion-text color="danger">
            <p>{{ errorMessage }}</p>
          </ion-text>
        </div>
      }

      <div>
        <!-- Tasto Accedi -->
        <ion-button class="app-button" expand="block" color="primary" type="submit" [disabled]="!loginForm.valid || isLoading">
          @if (isLoading) {
            <ion-spinner name="crescent"></ion-spinner>
          }
          @if (!isLoading) {
            <span>Accedi</span>
          }
          @if (isLoading) {
            <span>Accesso in corso...</span>
          }
        </ion-button>

        <!-- Tasto Annulla -->
        <ion-button class="app-button" expand="block" fill="clear" (click)="goBack()" [disabled]="isLoading">
          Annulla
        </ion-button>

        <!-- Alternativa register -->
        <div class="testo-register">
          <p>Non hai un account? <a [routerLink]="['/register']">Registrati</a></p>
        </div>
      </div>
    </form>
  </div>
</ion-content>
