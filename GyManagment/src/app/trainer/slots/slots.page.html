<ion-header>
  <ion-toolbar>
    <ion-title>Gestione Slot</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card class="create-slot-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="add-circle-outline" color="primary" style="margin-right:8px;"></ion-icon>
        Crea nuovo slot
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form (ngSubmit)="addSlot()">
        <div class="slot-fields-row-centered">
          <div class="slot-date-group">
            <label class="slot-label">
              <ion-icon name="calendar-outline" color="primary"></ion-icon>
              Data slot
            </label>
            <ion-datetime
              presentation="date"
              [(ngModel)]="slotDate"
              name="slotDate"
              required
              [min]="minDate">
            </ion-datetime>
            <div class="slot-times-row">
              <div class="slot-time-group">
                <label class="slot-label">
                  <ion-icon name="time-outline" color="primary"></ion-icon>
                  Ora inizio
                </label>
                <ion-datetime
                  presentation="time"
                  [(ngModel)]="startTime"
                  name="startTime"
                  required>
                </ion-datetime>
              </div>
              <div class="slot-time-group">
                <label class="slot-label">
                  <ion-icon name="time-outline" color="secondary"></ion-icon>
                  Ora fine
                </label>
                <ion-datetime
                  presentation="time"
                  [(ngModel)]="endTime"
                  name="endTime"
                  required>
                </ion-datetime>
              </div>
            </div>
          </div>
        </div>
        <ion-item lines="none" class="max-clienti-item">
          <ion-icon name="people-outline" slot="start" color="tertiary"></ion-icon>
          <ion-label position="stacked">Max clienti</ion-label>
          <ion-input
            type="number"
            [(ngModel)]="newSlot.max_clients"
            name="max_clients"
            min="1"
            required>
          </ion-input>
        </ion-item>
        <ion-button expand="block" type="submit" [disabled]="isLoading">
          <ion-icon name="add-outline" slot="start"></ion-icon>
          Aggiungi slot
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>

  <div *ngIf="isLoading" class="loading-container ion-text-center">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Caricamento slot...</p>
  </div>

  <ion-card *ngIf="error" color="danger">
    <ion-card-content>
      <p>{{ error }}</p>
    </ion-card-content>
  </ion-card>
</ion-content>